(this["webpackJsonpak-frontend"]=this["webpackJsonpak-frontend"]||[]).push([[0],{42:function(e,t,s){},43:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(24),r=s.n(n),l=s(15),i=s(2),o=s(12),d=s(8),b=(s(31),s(25),s(0));var j=function(e){var t=Object(a.useState)([]),s=Object(d.a)(t,2),n=s[0],r=s[1],l=Object(a.useState)(),i=Object(d.a)(l,2),j=i[0],m=i[1],p=Object(a.useState)(!1),h=Object(d.a)(p,2),x=h[0],u=h[1],f=Object(a.useRef)(null);Object(a.useEffect)((function(){O()}),[]);var O=function(){fetch("https://ashkev.peterboroughtenants.app/api/guests").then((function(e){return e.json()})).then((function(e){return r(e)}))},g=function(e,t){if(""!==t)return t};return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)("header",{className:"p-6",children:Object(b.jsx)("h1",{className:"font-bold text-xl",children:"Guest List"})}),Object(b.jsxs)("form",{ref:f,className:"p-6 print:hidden",style:{maxWidth:"550px"},onSubmit:function(e){e.preventDefault();var t=new FormData(f.current),s=JSON.stringify(Object.fromEntries(t),g);fetch("https://ashkev.peterboroughtenants.app/api/guests",{method:"POST",headers:{"Content-Type":"application/json"},body:s}).then((function(e){return 200!==e.status?(alert("There was a problem adding the new guest."),null):e.json()})).then((function(e){if(null!==e){var t=[];t.push.apply(t,Object(o.a)(n).concat([e])),r(t)}}))},children:[Object(b.jsx)("header",{className:"mb-3 border-b pb-2 w-full",children:"Add new guest"}),Object(b.jsxs)("dl",{className:"grid grid-cols-2 gap-3",children:[Object(b.jsx)("dt",{className:"font-bold col-start-1 col-span-1",children:"Name"}),Object(b.jsx)("dd",{className:"col-start-2 col-span-1",children:Object(b.jsx)("input",{required:!0,className:"w-full border shadow-inner p-2 mx-1",name:"first_name",placeholder:"First Name"})}),Object(b.jsx)("dd",{className:"col-start-2 col-span-1",children:Object(b.jsx)("input",{required:!0,className:"w-full border shadow-inner p-2 mx-1",name:"last_name",placeholder:"Last Name"})}),Object(b.jsx)("dt",{className:"font-bold col-start-1 col-span-1",children:"Display Name"}),Object(b.jsx)("dd",{children:Object(b.jsx)("input",{className:"w-full border shadow-inner p-2 mx-1",name:"display_name"})}),Object(b.jsx)("dt",{className:"font-bold col-start-1 col-span-1",children:"Parent ID"}),Object(b.jsx)("dd",{children:Object(b.jsx)("input",{className:"w-full border shadow-inner p-2 mx-1",name:"linked_to"})})]}),Object(b.jsx)("button",{className:"border-b-2 border-blue-400 bg-blue-200 text-blue-900 py-1 hover:bg-blue-100 px-3",children:"Save"})]}),Object(b.jsxs)("main",{className:"overflow-y-hidden",children:[Object(b.jsxs)("table",{className:"w-full overflow-y-scroll pr-3",children:[Object(b.jsx)("thead",{className:"border-b-2 top-0 sticky bg-gray-100",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"py-3 px-3 text-left pl-6",children:"Id"}),Object(b.jsx)("th",{className:"py-3 px-3 text-left",children:"Full Name"}),Object(b.jsx)("th",{className:"py-3 px-3 text-left",children:"Display Name"}),Object(b.jsx)("th",{className:"py-3 px-3 text-left",children:"Parent ID"}),Object(b.jsx)("th",{className:"py-3 px-3 text-left",children:"Attending"}),Object(b.jsx)("th",{className:"py-3 px-3 text-left",children:"Requirements"}),Object(b.jsx)("th",{className:"py-3 px-3 text-left",children:"Accomodation"}),Object(b.jsx)("th",{className:"py-3 px-3 text-left print:hidden",children:"QR Code"}),Object(b.jsx)("th",{className:"print:hidden pr-6"})]})}),Object(b.jsx)("tbody",{children:n.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"py-2 px-3 pl-6 border-b",children:null===e.linked_to&&e.id}),Object(b.jsxs)("td",{className:"py-2 px-3 border-b",children:[e.first_name," ",e.last_name]}),Object(b.jsx)("td",{className:"py-2 px-3 border-b",children:e.display_name}),Object(b.jsx)("td",{className:"py- px-3 border-b",children:e.linked_to}),Object(b.jsx)("td",{className:"py-2 px-3 border-b",children:null===e.responded_at?"":e.attending?"YES":"NO"}),Object(b.jsx)("td",{className:"py-2 px-3 border-b",children:e.requirements}),Object(b.jsx)("td",{className:"py-2 px-3 border-b",children:e.accomodation&&"Required"}),Object(b.jsx)("td",{className:"py-2 px-3 border-b print:hidden",children:Object(b.jsx)("button",{className:"underline hover:text-blue-700",onClick:function(){m(e),u(!0)},children:"View"})}),Object(b.jsx)("td",{className:"py-2 px-3 border-b print:hidden pr-6",children:Object(b.jsx)("button",{className:"underline hover:text-blue-700",onClick:function(){return t=e.id,void fetch("https://ashkev.peterboroughtenants.app/api/guests/".concat(t),{method:"DELETE"}).then((function(){return O()}));var t},children:"Delete"})})]})}))})]}),0===n.length&&Object(b.jsx)("div",{className:"p-6 my-6 bg-gray-200 text-center",children:"There are no guests added."})]}),x&&Object(b.jsxs)("section",{className:"flex sticky bottom-0 w-full bg-white p-6 border-t-2 justify-between items-start",children:[Object(b.jsxs)("div",{className:"flex gap-6",children:[Object(b.jsx)("img",{alt:"qr code",src:"https://ashkev.peterboroughtenants.app/api/qr-code/".concat(j.linked_to||j.id)}),Object(b.jsxs)("aside",{className:"pl-6 border-l flex flex-col gap-5",children:[Object(b.jsx)("a",{href:"https://ashkev.peterboroughtenants.app/rsvp/".concat(j.linked_to||j.id),target:"_blank",className:"block border-b-2 border-blue-400 bg-blue-200 text-blue-900 py-1 hover:bg-blue-100 px-3",children:"RSVP Page"}),Object(b.jsx)("a",{href:"https://ashkev.peterboroughtenants.app/api/qr-code/".concat(j.linked_to||j.id),className:"block border-b-2 border-green-400 bg-green-200 text-green-900 py-1 hover:bg-green-100 px-3",children:"Download"})]})]}),Object(b.jsx)("button",{className:"underline hover:text-blue-700",onClick:function(){return u(!1)},children:"Close"})]})]})},m=s.p+"static/media/Monogram.b03ad541.svg",p=s.p+"static/media/web-invite-datelayoutdesign.c8265ef0.svg",h=s.p+"static/media/bg-left.fb7462c6.svg",x=s.p+"static/media/bg-right.e2002390.svg";var u=function(e){var t=Object(i.f)().token,s=Object(a.useState)([]),n=Object(d.a)(s,2),r=n[0],l=n[1],j=Object(a.useState)([]),u=Object(d.a)(j,2),f=u[0],O=u[1],g=Object(a.useRef)([]);Object(a.useEffect)((function(){N()}),[]);var N=function(){fetch("https://ashkev.peterboroughtenants.app/api/rsvp/".concat(t)).then((function(e){return e.json()})).then((function(e){return l(e)}))},y=function(e){var t=[];if(0===r.length&&(t[0]="Loading..."),1===r.length&&(t[0]=r[0].display_name||"".concat(r[0].first_name," ").concat(r[0].last_name)),2===r.length){var s=r[0].display_name||r[0].first_name+(r[0].last_name===r[1].last_name?"":" "+r[0].last_name),a=r[1].display_name||"".concat(r[1].first_name," ").concat(r[1].last_name);t[0]=s+" & "+a}return r.length>2&&(t=[],r.forEach((function(e,s){t[s]=e.display_name||"".concat(e.first_name," ").concat(e.last_name)}))),Object(b.jsxs)("p",{className:"font-bold my-6 text-2xl capitalize",children:[Object(b.jsx)("span",{className:"text-sm",children:"TO: "}),t.join(", ")]})},v=function(e,t){return"true"===t||"false"!==t&&t};return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsxs)("main",{className:"grid grid-cols-1 grid-rows-1 border-fat border-gold max-w-prose mx-auto",children:[Object(b.jsx)("img",{alt:"Grey whirl",src:h,className:"col-span-full row-span-full w-1/2 self-end"}),Object(b.jsx)("img",{alt:"Another grey whirl",src:x,className:"col-span-full row-span-full w-1/2 self-end justify-self-end"}),Object(b.jsxs)("div",{className:"col-span-full row-span-full",children:[Object(b.jsx)("img",{alt:"Ashley & Kevin",src:m,className:"w-full object-cover object-center h-auto mb-12"}),Object(b.jsxs)("header",{className:"font-serif text-center px-8 mt-12 mb-6",children:[Object(b.jsx)("h1",{className:"uppercase my-6",children:"The marriage of Ashley Beech & Kevin Goodger"}),Object(b.jsx)(y,{}),Object(b.jsx)("p",{className:"text-gray-600 text-sm",children:"Please RSVP using the form below"})]}),Object(b.jsx)("img",{alt:"Saturday 30th July 2022 at 2PM",src:p,className:"w-full object-contain object-center h-auto px-8 mb-6"}),Object(b.jsx)("p",{className:"font-serif text-center uppercase px-6 mx-6 mb-10",children:"We would like to request the pleasure of your company to join us in celebrating our love"})]})]}),Object(b.jsx)("section",{className:"border-fat border-gold max-w-prose mx-auto border-t-0 pt-6",children:r.map((function(e,t){return Object(b.jsxs)("form",{ref:function(e){return g.current.push(e)},onSubmit:function(s){return function(e,t,s){e.preventDefault();var a=new FormData(g.current[s]),c=JSON.stringify(Object.fromEntries(a),v);fetch("https://ashkev.peterboroughtenants.app/api/rsvp/".concat(t.id),{method:"POST",headers:{"Content-Type":"application/json"},body:c}).then((function(e){if(200===e.status){var s=[];s.push.apply(s,Object(o.a)(f).concat([t.id])),O(s)}}))}(s,e,t)},className:"px-6 mb-6 font-serif",children:[Object(b.jsxs)("h2",{className:"text-center underline",children:[e.first_name," ",e.last_name,":"]}),Object(b.jsxs)("div",{className:"md:flex gap-3 my-3",children:[Object(b.jsxs)("div",{className:"p-2 divide-solid w-1/3",children:[Object(b.jsx)("p",{className:"font-bold md:text-xs",children:"Can you attend?"}),Object(b.jsxs)("label",{className:"md:text-xs block my-2",children:[Object(b.jsx)("input",{className:"mr-2",type:"radio",name:"attending",value:"true"}),"Yes"]}),Object(b.jsxs)("label",{className:"md:text-xs block my-2",children:[Object(b.jsx)("input",{className:"mr-2",type:"radio",name:"attending",value:"false"}),"No"]})]}),Object(b.jsxs)("div",{className:"p-2 divide-solid w-1/3",children:[Object(b.jsx)("p",{className:"font-bold md:text-xs",children:"Do you require accomodation?"}),Object(b.jsxs)("label",{className:"md:text-xs block my-2",children:[Object(b.jsx)("input",{className:"mr-2",type:"radio",name:"accomodation",value:"true"}),"Yes"]}),Object(b.jsxs)("label",{className:"md:text-xs block my-2",children:[Object(b.jsx)("input",{className:"mr-2",type:"radio",name:"accomodation",value:"false"}),"No"]})]}),Object(b.jsxs)("div",{className:"p-2 divide-solid",children:[Object(b.jsx)("label",{className:"font-bold md:text-xs",children:"Do you have any other requirements (e.g. dietary)"}),Object(b.jsx)("textarea",{className:"my-2 p-1 md:text-xs w-full border shadow-inner",name:"requirements"})]})]}),Object(b.jsxs)("footer",{className:"flex",children:[Object(b.jsx)("button",{className:"p-2 bg-gray-200 hover:bg-gray-900 hover:text-gold",children:"Send"}),f.includes(e.id)&&Object(b.jsx)("span",{className:"p-2 bg-green-200 mx-3",children:"Saved"})]})]},e.id)}))})]})};var f=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/rsvp/:token",component:u}),Object(b.jsx)(i.a,{path:"/guests/secret-link",component:j}),Object(b.jsx)(i.a,{path:"/",children:"404: Invalid page"})]})})},O=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,44)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};s(42);r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(l.a,{children:Object(b.jsx)(f,{})})}),document.getElementById("root")),O()}},[[43,1,2]]]);
//# sourceMappingURL=main.6eac2147.chunk.js.map