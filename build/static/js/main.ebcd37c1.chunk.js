(this["webpackJsonpak-frontend"]=this["webpackJsonpak-frontend"]||[]).push([[0],{42:function(e,t,s){},43:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),c=s(24),r=s.n(c),l=s(15),i=s(2),o=s(12),d=s(7),b=s(25),j=s.n(b),m=s(26),p=s(0);var h=function(e){var t=Object(a.useState)([]),s=Object(d.a)(t,2),c=s[0],r=s[1],l=Object(a.useState)(),i=Object(d.a)(l,2),b=i[0],h=i[1],u=Object(a.useState)(""),x=Object(d.a)(u,2),f=x[0],O=x[1],N=Object(a.useState)(!1),g=Object(d.a)(N,2),y=g[0],v=g[1],w=Object(a.useRef)(null);Object(a.useEffect)((function(){_()}),[]);var _=function(){fetch("https://ashkev.peterboroughtenants.app/api/guests").then((function(e){return e.json()})).then((function(e){return r(e)}))},k=function(e,t){if(""!==t)return t};return Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsx)("header",{className:"p-6",children:Object(p.jsx)("h1",{className:"font-bold text-xl",children:"Guest List"})}),Object(p.jsxs)("form",{ref:w,className:"p-6 print:hidden",style:{maxWidth:"550px"},onSubmit:function(e){e.preventDefault();var t=new FormData(w.current),s=JSON.stringify(Object.fromEntries(t),k);fetch("https://ashkev.peterboroughtenants.app/api/guests",{method:"POST",headers:{"Content-Type":"application/json"},body:s}).then((function(e){return 200!==e.status?(alert("There was a problem adding the new guest."),null):e.json()})).then((function(e){if(null!==e){var t=[];t.push.apply(t,Object(o.a)(c).concat([e])),r(t)}}))},children:[Object(p.jsx)("header",{className:"mb-3 border-b pb-2 w-full",children:"Add new guest"}),Object(p.jsxs)("dl",{className:"grid grid-cols-2 gap-3",children:[Object(p.jsx)("dt",{className:"font-bold col-start-1 col-span-1",children:"Name"}),Object(p.jsx)("dd",{className:"col-start-2 col-span-1",children:Object(p.jsx)("input",{required:!0,className:"w-full border shadow-inner p-2 mx-1",name:"first_name",placeholder:"First Name"})}),Object(p.jsx)("dd",{className:"col-start-2 col-span-1",children:Object(p.jsx)("input",{required:!0,className:"w-full border shadow-inner p-2 mx-1",name:"last_name",placeholder:"Last Name"})}),Object(p.jsx)("dt",{className:"font-bold col-start-1 col-span-1",children:"Display Name"}),Object(p.jsx)("dd",{children:Object(p.jsx)("input",{className:"w-full border shadow-inner p-2 mx-1",name:"display_name"})}),Object(p.jsx)("dt",{className:"font-bold col-start-1 col-span-1",children:"Parent ID"}),Object(p.jsx)("dd",{children:Object(p.jsx)("input",{className:"w-full border shadow-inner p-2 mx-1",name:"linked_to"})})]}),Object(p.jsx)("button",{className:"border-b-2 border-blue-400 bg-blue-200 text-blue-900 py-1 hover:bg-blue-100 px-3",children:"Save"})]}),Object(p.jsxs)("main",{className:"overflow-y-hidden",children:[Object(p.jsxs)("table",{className:"w-full overflow-y-scroll pr-3",children:[Object(p.jsx)("thead",{className:"border-b-2 top-0 sticky bg-gray-100",children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{className:"py-3 px-3 text-left pl-6",children:"Id"}),Object(p.jsx)("th",{className:"py-3 px-3 text-left",children:"Full Name"}),Object(p.jsx)("th",{className:"py-3 px-3 text-left",children:"Display Name"}),Object(p.jsx)("th",{className:"py-3 px-3 text-left",children:"Parent ID"}),Object(p.jsx)("th",{className:"py-3 px-3 text-left",children:"Attending"}),Object(p.jsx)("th",{className:"py-3 px-3 text-left",children:"Requirements"}),Object(p.jsx)("th",{className:"py-3 px-3 text-left",children:"Accomodation"}),Object(p.jsx)("th",{className:"py-3 px-3 text-left print:hidden",children:"QR Code"}),Object(p.jsx)("th",{className:"print:hidden pr-6"})]})}),Object(p.jsx)("tbody",{children:c.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"py-2 px-3 pl-6 border-b",children:null===e.linked_to&&e.id}),Object(p.jsxs)("td",{className:"py-2 px-3 border-b",children:[e.first_name," ",e.last_name]}),Object(p.jsx)("td",{className:"py-2 px-3 border-b",children:e.display_name}),Object(p.jsx)("td",{className:"py- px-3 border-b",children:e.linked_to}),Object(p.jsx)("td",{className:"py-2 px-3 border-b",children:null===e.responded_at?"":e.attending?"YES":"NO"}),Object(p.jsx)("td",{className:"py-2 px-3 border-b",children:e.requirements}),Object(p.jsx)("td",{className:"py-2 px-3 border-b",children:e.accomodation&&"Required"}),Object(p.jsx)("td",{className:"py-2 px-3 border-b print:hidden",children:Object(p.jsx)("button",{className:"underline hover:text-blue-700",onClick:function(){return function(e){var t=e.id;null!==e.linked_to&&(t=e.linked_to),O("https://ashkev.peterboroughtenants.app/rsvp/".concat(t)),v(!0),h(e)}(e)},children:"View"})}),Object(p.jsx)("td",{className:"py-2 px-3 border-b print:hidden pr-6",children:Object(p.jsx)("button",{className:"underline hover:text-blue-700",children:"Delete"})})]})}))})]}),0===c.length&&Object(p.jsx)("div",{className:"p-6 my-6 bg-gray-200 text-center",children:"There are no guests added."})]}),y&&Object(p.jsxs)("section",{className:"sticky bottom-0 w-full bg-white p-6 border-t-2",children:[Object(p.jsx)("button",{className:"underline hover:text-blue-700 float-right",onClick:function(){return v(!1)},children:"Close"}),Object(p.jsxs)("div",{className:"flex gap-6",children:[Object(p.jsx)(j.a,{id:"the-qr-code",value:f,size:200,level:"M"}),Object(p.jsx)("aside",{className:"pl-6 border-l",children:Object(p.jsx)("button",{onClick:function(){var e=b,t=e.id;null!==e.linked_to&&(t=e.linked_to),document.getElementById("the-qr-code").toBlob((function(s){return Object(m.saveAs)(s,"QR_".concat(t,"_").concat(e.last_name.toUpperCase(),".png"))}))},className:"border-b-2 border-green-400 bg-green-200 text-green-900 py-1 hover:bg-green-100 px-3",children:"Download"})})]})]})]})},u=s.p+"static/media/Monogram.b03ad541.svg",x=s.p+"static/media/web-invite-datelayoutdesign.c8265ef0.svg",f=s.p+"static/media/bg-left.fb7462c6.svg",O=s.p+"static/media/bg-right.e2002390.svg";var N=function(e){var t=Object(i.f)().token,s=Object(a.useState)([]),c=Object(d.a)(s,2),r=c[0],l=c[1],b=Object(a.useState)([]),j=Object(d.a)(b,2),m=j[0],h=j[1],N=Object(a.useRef)([]);Object(a.useEffect)((function(){g()}),[]);var g=function(){fetch("https://ashkev.peterboroughtenants.app/api/rsvp/".concat(t)).then((function(e){return e.json()})).then((function(e){return l(e)}))},y=function(e){var t=[];if(0===r.length&&(t[0]="Loading..."),1===r.length&&(t[0]=r[0].display_name||"".concat(r[0].first_name," ").concat(r[0].last_name)),2===r.length){var s=r[0].display_name||r[0].first_name+(r[0].last_name===r[1].last_name?"":" "+r[0].last_name),a=r[1].display_name||"".concat(r[1].first_name," ").concat(r[1].last_name);t[0]=s+" & "+a}return r.length>2&&(t=[],r.forEach((function(e,s){t[s]=e.display_name||"".concat(e.first_name," ").concat(e.last_name)}))),Object(p.jsxs)("p",{className:"font-bold my-6 text-2xl capitalize",children:[Object(p.jsx)("span",{className:"text-sm",children:"TO: "}),t.join(", ")]})},v=function(e,t){return"true"===t||"false"!==t&&t};return Object(p.jsxs)(n.a.Fragment,{children:[Object(p.jsxs)("main",{className:"grid grid-cols-1 grid-rows-1 border-fat border-gold max-w-prose mx-auto",children:[Object(p.jsx)("img",{alt:"Grey whirl",src:f,className:"col-span-full row-span-full w-1/2 self-end"}),Object(p.jsx)("img",{alt:"Another grey whirl",src:O,className:"col-span-full row-span-full w-1/2 self-end justify-self-end"}),Object(p.jsxs)("div",{className:"col-span-full row-span-full",children:[Object(p.jsx)("img",{alt:"Ashley & Kevin",src:u,className:"w-full object-cover object-center h-auto mb-12"}),Object(p.jsxs)("header",{className:"font-serif text-center px-8 mt-12 mb-6",children:[Object(p.jsx)("h1",{className:"uppercase my-6",children:"The marriage of Ashley Beech & Kevin Goodger"}),Object(p.jsx)(y,{}),Object(p.jsx)("p",{className:"text-gray-600 text-sm",children:"Please RSVP using the form below"})]}),Object(p.jsx)("img",{alt:"Saturday 30th July 2022 at 2PM",src:x,className:"w-full object-contain object-center h-auto px-8 mb-6"}),Object(p.jsx)("p",{className:"font-serif text-center uppercase px-6 mx-6 mb-10",children:"We would like to request the pleasure of your company to join us in celebrating our love"})]})]}),Object(p.jsx)("section",{className:"border-fat border-gold max-w-prose mx-auto border-t-0 pt-6",children:r.map((function(e,t){return Object(p.jsxs)("form",{ref:function(e){return N.current.push(e)},onSubmit:function(s){return function(e,t,s){e.preventDefault();var a=new FormData(N.current[s]),n=JSON.stringify(Object.fromEntries(a),v);fetch("https://ashkev.peterboroughtenants.app/api/rsvp/".concat(t.id),{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((function(e){if(200===e.status){var s=[];s.push.apply(s,Object(o.a)(m).concat([t.id])),h(s)}}))}(s,e,t)},className:"px-6 mb-6 font-serif",children:[Object(p.jsxs)("h2",{className:"text-center underline",children:[e.first_name," ",e.last_name,":"]}),Object(p.jsxs)("div",{className:"md:flex gap-3 my-3",children:[Object(p.jsxs)("div",{className:"p-2 divide-solid w-1/3",children:[Object(p.jsx)("p",{className:"font-bold md:text-xs",children:"Can you attend?"}),Object(p.jsxs)("label",{className:"md:text-xs block my-2",children:[Object(p.jsx)("input",{className:"mr-2",type:"radio",name:"attending",value:"true"}),"Yes"]}),Object(p.jsxs)("label",{className:"md:text-xs block my-2",children:[Object(p.jsx)("input",{className:"mr-2",type:"radio",name:"attending",value:"false"}),"No"]})]}),Object(p.jsxs)("div",{className:"p-2 divide-solid w-1/3",children:[Object(p.jsx)("p",{className:"font-bold md:text-xs",children:"Do you require accomodation?"}),Object(p.jsxs)("label",{className:"md:text-xs block my-2",children:[Object(p.jsx)("input",{className:"mr-2",type:"radio",name:"accomodation",value:"true"}),"Yes"]}),Object(p.jsxs)("label",{className:"md:text-xs block my-2",children:[Object(p.jsx)("input",{className:"mr-2",type:"radio",name:"accomodation",value:"false"}),"No"]})]}),Object(p.jsxs)("div",{className:"p-2 divide-solid",children:[Object(p.jsx)("label",{className:"font-bold md:text-xs",children:"Do you have any other requirements (e.g. dietary)"}),Object(p.jsx)("textarea",{className:"my-2 p-1 md:text-xs w-full border shadow-inner",name:"requirements"})]})]}),Object(p.jsxs)("footer",{className:"flex",children:[Object(p.jsx)("button",{className:"p-2 bg-gray-200 hover:bg-gray-900 hover:text-gold",children:"Send"}),m.includes(e.id)&&Object(p.jsx)("span",{className:"p-2 bg-green-200 mx-3",children:"Saved"})]})]},e.id)}))})]})};var g=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/rsvp/:token",component:N}),Object(p.jsx)(i.a,{path:"/guests/secret-link",component:h}),Object(p.jsx)(i.a,{path:"/",children:"404: Invalid page"})]})})},y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,44)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),c(e),r(e)}))};s(42);r.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(l.a,{children:Object(p.jsx)(g,{})})}),document.getElementById("root")),y()}},[[43,1,2]]]);
//# sourceMappingURL=main.ebcd37c1.chunk.js.map